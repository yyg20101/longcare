# 需求文档：NFC签退成功后返回首页逻辑变更

## 1. 背景与问题
当前应用中，用户在 `NfcWorkflowScreen` 完成“结束工单”（Sign-off/End Order）操作后，点击返回按钮（无论是系统返回键还是左上角返回图标），会回退到上一级页面（通常是服务完成页或订单详情页）。
从业务逻辑角度看，工单结束后流程应当终止，用户不应能返回到已完成的工单流程中。

## 2. 需求描述
系统需要拦截“结束工单”成功状态下的返回操作，将其重定向至首页（Home），并清除与当前工单相关的任务栈。

### 2.1 触发条件
-   当前页面：`NfcWorkflowScreen`
-   操作模式：`SignInMode.END_ORDER` (结束工单模式)
-   当前状态：`SignInState.SUCCESS` (签退/结束成功)

### 2.2 预期行为
-   **满足触发条件时**：
    -   用户点击系统返回键或页面左上角返回按钮时，应用应导航至首页 (`HomeRoute`)。
    -   同时清除之前的所有页面栈（Clear Stack），确保用户无法通过再次点击返回键回到结束工单页面。
-   **不满足触发条件时**（例如：开始工单模式、签退失败、未签退状态）：
    -   保持原有逻辑，执行标准的 `popBackStack` 操作，返回上一页。

## 3. 修改点
### 3.1 导航逻辑 (`NfcWorkflowScreen.kt`)
-   引入自定义返回逻辑 `onBack`。
-   在 `onBack` 中判断当前模式和状态。
-   使用 `UnifiedBackHandler` 接管系统返回键，并绑定 `onBack` 逻辑。
-   将顶部导航栏（TopAppBar）的返回按钮点击事件绑定至 `onBack`。

## 4. 验证方案
1.  **场景一：开始工单（Start Order）**
    -   进入 NFC 签到页面。
    -   点击返回。
    -   **预期**：返回上一页。

2.  **场景二：结束工单 - 未成功（End Order - Idle/Fail）**
    -   进入 NFC 签退页面。
    -   不操作或操作失败。
    -   点击返回。
    -   **预期**：返回上一页。

3.  **场景三：结束工单 - 成功（End Order - Success）**
    -   进入 NFC 签退页面并成功签退。
    -   点击系统返回键 或 点击页面左上角返回按钮。
    -   **预期**：跳转回首页，且无法返回到该工单流程。
